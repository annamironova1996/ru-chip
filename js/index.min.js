$(document).ready((function(){let e=!0;function t(){let e=$(".breadcrumbs").outerHeight(!0)+$(".header").outerHeight(!0);$(".filters-mob.active").css("top",e)}function i(){e&&(!function(){const e=$(".main-section__card.active");if(e.length){const t=e.data("image");e.css("background-image",`url('${t}')`)}}(),e=!1),$(window).width()>480?$(".main-section__card.toggle").off("click").on("click",(function(){$(".main-section__card.toggle").removeClass("active").css("background-image","none"),$(this).addClass("active").css("background-image",`url('${$(this).data("image")}')`)})):$(".main-section__card.toggle").off("click"),function(){const e=$(".main-section__card.toggle"),t=$(window).width()<481;e.each((function(e){t||1===e?$(this).addClass("active").css("background-image",`url('${$(this).data("image")}')`):$(this).removeClass("active").css("background-image","none")}))}(),function(){const e=$(window).width()<481,t=$(".main-section__cards"),i=$(".product-cards");e?(t.hasClass("slick-initialized")||t.slick({dots:!0,speed:300,arrows:!1,slidesToShow:1,slidesToScroll:1,infinite:!0,adaptiveHeight:!0,autoplay:!0,autoplaySpeed:5e3}),i.hasClass("slick-initialized")||i.slick({speed:300,arrows:!1,slidesToShow:1.02,slidesToScroll:1,infinite:!0,adaptiveHeight:!0})):(t.hasClass("slick-initialized")&&t.slick("unslick"),i.hasClass("slick-initialized")&&i.slick("unslick"))}(),function(){const e=$(window).width()<480,t=$(".main-section__card"),i=e?$(".slick-dots li").length:0;t.each((function(){const t=$(this).find(".main-section__card-num b");e?t.text("/0"+(i-1)):t.text("")}))}(),function(){const e=$(window).width()>=991&&$(window).width()<=1355;let t=$(".grid").children().length;e?t%2!=0&&$(".grid-item:last-child").css("grid-column","span 2"):$(".grid-item:last-child").css("grid-column","auto")}(),t(),function(){const e=$(window).height(),t=window.innerWidth>480,i=$(".header"),s=$(".main");if(t){const t=e-(i.offset().top+i.outerHeight());s.css("min-height",t)}}()}i(),$(window).resize(i);const s=$('input[data-id="required"]');$(".form").on("submit",(function(e){let t=!0;return $(this).find(s).each((function(){""===$(this).val().trim()&&(e.preventDefault(),$(this).addClass("error"),t=!1)})),t})),s.on("input",(function(){$(this).toggleClass("error",""===$(this).val().trim())})),$(".faq-item").on("click",(function(){const e=$(this).find(".faq-answer");$(".faq-answer").not(e).slideUp().parent(".faq-item").removeClass("active"),e.slideToggle("slow").parent(".faq-item").toggleClass("active")})),innerWidth>991&&($(".faq-inner .faq-item:nth-child(even)").on("click",(function(){$(".faq-item").css("height","auto"),$(this).prev().css("height","max-content")})),$(".faq-inner .faq-item:nth-child(odd)").on("click",(function(){$(".faq-item").css("height","auto"),$(this).next().css("height","max-content")}))),$(".popular-list > a:nth-child(3n)").addClass("w-max"),$(".header-mobile__button").on("click",(function(){!function(){const e=$(".header-mobile__search");e.hasClass("active")?e.removeClass("active"):$(".background").toggleClass("active")}(),function(e){const t=$(".header-modal");e.toggleClass("close"),t.toggleClass("active")}($(this)),$(".header-mobile__button").hasClass("close")?($("html").css("overflow","hidden"),$("body").css("overflow","hidden")):($("html").css("overflow-y","auto"),$("body").css("overflow-y","auto")),$(".filters-mob")&&$(".filters-mob").removeClass("active")})),$(".header-catalog__button").on("click",(function(){$(".background").toggleClass("active"),$(".header-catalog__menu-inner").toggleClass("active")})),$('[data-id="search"]').on("click",(function(){$(".header-mobile__button").hasClass("close")?($(".header-mobile__button").removeClass("close"),$(".header-modal").removeClass("active")):$(".background").toggleClass("active"),$(".filters-mob")&&$(".filters-mob").removeClass("active"),$(".header-mobile__search").toggleClass("active"),$(".header-mobile__search").hasClass("active")?($("html").css("overflow","hidden"),$("body").css("overflow","hidden")):($("html").css("overflow-y","auto"),$("body").css("overflow-y","auto"))})),$(".background").on("click",(function(){$(".header-mobile__button").hasClass("close")&&($(".header-mobile__button").removeClass("close"),$(".header-modal").removeClass("active")),$(".header-mobile__search").hasClass("active")&&$(".header-mobile__search").removeClass("active"),$(this).removeClass("active"),$("html").css("overflow-y","auto"),$("body").css("overflow-y","auto")})),$('.file-inner input[type="file"]').on("change",(function(){var e=$(this).prop("files")[0];e?$(".file-inner button").text(`Вы прикрепили файл: "${e.name}"`).addClass("active"):$(".file-inner button").text("Прикрепить файл").removeClass("active")}));let l=$(".images-magnific");function o(){innerWidth<768&&$(".filter-item input").on("change",(function(){let e=$(this).closest(".filter").find($(".filter-button span")).text(),t=$(".filters-selected").find(`.filters-select[data-filter="${e}"]`);if(t.length>0){let e=t.find(".filter-label").text().split(", ");if(!$(this).is(":checked")){let i=$(this).next("label").text();e=e.filter((e=>e.trim()!==i.trim())),t.find(".filter-label").text(e.join(", ")),0===e.length&&t.remove()}}}))}function n(){$("input:checked").length>0?$(".filters-buttons").css("display","grid"):$(".filters-buttons").css("display","none")}let a;l&&l.each((function(){$(this).magnificPopup({delegate:"a",type:"image",gallery:{enabled:!0,navigateByImgClick:!0}})})),$(".certificates-list").slick({speed:300,slidesToShow:4,slidesToScroll:1,adaptiveHeight:!0,prevArrow:$(".slider-button-prev"),nextArrow:$(".slider-button-next"),responsive:[{breakpoint:1254,settings:{slidesToShow:3}},{breakpoint:769,settings:{slidesToShow:2}},{breakpoint:546,settings:{slidesToShow:1.02,infinite:!0,variableWidth:!1}}]}),$(".minus, .plus").on("click",(function(){const e="Y"===$(this).data("trigger"),t=$(this).hasClass("plus"),i=$(this).parent(".count").find(".count-input");let s=Number(i.text());const l=parseInt(i.data("ratio")??1);let o=$(this).closest(".buy_block").find(".item-action .to_cart"),n=parseFloat(o.data("min")?o.data("min"):$(this).data("min")?$(this).data("min"):0);n<l&&(n=l);let a=t?s+l:Math.max(0,s-l);if(!t&&parseFloat(n)>0&&a<n&&(a=0),!(a<n)&&(i.text(a),e)){let e=JItemAction.factory(o[0]);if(0===parseFloat(s))return e.state=!1,e.resetQuantity(),BX.onCustomEvent("onCounterGoals",[{goal:e.getStateGoalCode(!1),params:{id:e.node.getAttribute("data-id")}}]),"function"==typeof JNoticeSurface&&JNoticeSurface.get().node.remove(),e.updateState();e.abortPrevRequest(),setTimeout((function(){e.updateState(),!1}),700),BX.onCustomEvent("onCounterProductAction",[{type:"change",params:{id:$(this),value:s}}])}})),$(".slider-product").each((function(){$(this).slick({dots:!0,speed:300,arrows:!1,slidesToShow:1,slidesToScroll:1,infinite:!0,adaptiveHeight:!0})})),$(".subcategory-more__open").on("click",(function(){$(".subcategory-more__modal").hide(),$(this).parent(".subcategory-more").find(".subcategory-more__modal").show()})),$(".subcategory-more__modal-close").on("click",(function(){$(this).parent(".subcategory-more__modal").hide()})),$(".filter-search input").on("input",(function(){const e=$(this).val().toLowerCase();let t=!1;const i=$(this).closest(".filter");i.find(".filter-item").each((function(){$(this).find("label").text().toLowerCase().includes(e)?($(this).show(),t=!0):$(this).hide()})),t?i.find(".no-results").remove():0===i.find(".no-results").length&&i.find(".filter-container").append('<div class="no-results">Ничего не найдено</div>');i.find(".filter-scroll").height()<321?i.find(".mCSB_dragger").css("opacity","0"):i.find(".mCSB_dragger").css("opacity","1")})),$(".filter-button").on("click",(function(){let e=$(this).parent(".filter"),t=e.find(".filter-show"),i=e.find(".filter-scroll");$(".filter-show").not(t).slideUp((function(){$(this).closest(".filter").find(".filter-search input").val("").trigger("input")})),$(this).hasClass("active")?($(this).removeClass("active"),t.slideUp()):($(".filter-button").removeClass("active"),$(this).addClass("active"),t.slideDown()),t.is(":visible")||(e.find(".filter-search input").val(""),e.find(".filter-search input").trigger("input")),i.mCustomScrollbar("update"),i.hasClass("mCS_no_scrollbar")||i.mCustomScrollbar({theme:"dark-3",scrollInertia:322}),innerWidth>1440?i.height()<322?e.find(".mCSB_dragger").css("opacity","0"):e.find(".mCSB_dragger").css("opacity","1"):i.height()<250?e.find(".mCSB_dragger").css("opacity","0"):e.find(".mCSB_dragger").css("opacity","1")})),$(".filter-submit").on("click",(function(){let e=$(this).closest(".filter"),t=e.find(".filter-item input:checked"),i=e.find($(".filter-button span")).text(),s=[];t.each((function(){let e=$(this).next("label").text();s.push(e)}));let l=$(".filters-selected").find(`.filters-select[data-filter="${i}"]`);if(s.length>0){if(l.length>0){let e=l.find(".filter-label").text().replace(`${i}: `,"").split(", ");s.forEach((function(t){e.includes(t)||e.push(t)})),e=e.filter((e=>s.includes(e))),l.find(".filter-label").text(`${i}: ${e.join(", ")}`)}else $(".filters-selected").append(`<div class="filters-select" data-filter="${i}">\n                        <span class="filter-label">${i}: ${s.join(", ")}</span>\n                        <button type="button" class="filters-delete">\n                            <svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                <path d="M6.27498 4.88057L11.1556 0L12.55 1.39444L7.66941 6.275L12.55 11.1555L11.1556 12.5499L6.27498 7.66943L1.39445 12.5499L0 11.1555L4.88055 6.275L0 1.39444L1.39445 0L6.27498 4.88057Z" fill="white" />\n                            </svg>\n                        </button>\n                    </div>`);$(".filters-show").css("display","flex")}else l.length>0&&l.remove();0===$(".filters-selected").children().length&&$(".filters-show").css("display","none"),e.find(".filter-show").slideToggle();let o=e.find(".filter-button");t.length>0?o.addClass("check-filter-button"):o.removeClass("check-filter-button"),$(".filter-button").removeClass("active")})),$(".filters-selected").on("click",".filters-delete",(function(){$(this).closest(".filters-select").remove(),0===$(".filters-selected").find(".filters-select").length?$(".filters-show").css("display","none"):$(".filters-show").css("display","flex")})),o(),$(window).on("resize",(function(){o()})),$(document).on("click",".filters-reset",(function(){$(".filter-button").removeClass("check-filter-button"),$(".filters-selected").empty(),$(".filter-item input").prop("checked",!1),$(".filters-show").hide()})),$(".filters-title").on("click",(function(){let e=$(this).parent(".filters-item").find(".filters-show"),t=$(this).hasClass("active");$(".filters-show").not(e).slideUp().parent().find(".filters-title").removeClass("active"),t?($(this).removeClass("active"),e.slideUp()):(e.slideDown(),$(this).addClass("active"))})),$(".filter-item input").on("input",(function(){let e=$(this).closest(".filters-list").find(".filters-item");e.find(".filters-checked").empty();let t=!1;e.each((function(){let e=$(this).find("input:checked");if(e.length>0){t=!0;let i=[];e.each((function(){let e=$(this).next("label").text();i.push(e)})),$(this).closest(".filters-item").find(".filters-checked").append(`${i.join(", ")}`),$(this).closest(".filters-item").find(".filters-details").css("display","flex")}else $(this).closest(".filters-item").find(".filters-details").css("display","none")}))})),$(".filters-drop").on("click",(function(){let e=$(this).closest(".filters-item"),t=e.find("input:checked");t.length>0&&(t.prop("checked",!1),e.find(".filters-checked").empty(),e.find(".filters-details").css("display","none")),n()})),$(".filters-drop").on("click",(function(){let e=$(this).closest(".filters-item"),t=e.find("input:checked");t.length>0&&(t.prop("checked",!1),e.find(".filters-checked").empty(),e.find(".filters-details").css("display","none")),n()})),$(".filters-all-drop").on("click",(function(){let e=$("input:checked");e.length>0&&(e.prop("checked",!1),$(".filters-checked").empty(),$(".filters-details").css("display","none"),$(".filters-show").css("display","none")),n()})),$(".filters-button").on("click",(function(){$("html, body").scrollTop(0),$("html").css("overflow-y","hidden"),$("body").css("overflow-y","hidden"),$(".filters-mob").addClass("active"),t();const e=$(".filters-list"),i=function(e){const t=e[0].getBoundingClientRect();return $(window).height()-t.top}(e);e.css("max-height",i)})),$(".mob-title").on("click",(function(){$("html").css("overflow-y","auto"),$("body").css("overflow-y","auto"),$(".filters-mob").removeClass("active")})),$(".filters-all-submit").on("click",(function(){$("html").css("overflow-y","auto"),$("body").css("overflow-y","auto"),$(".filters-mob").removeClass("active")})),$(document).on("click",".checked-all",(function(){const e=$(this),t=e.closest(".checked-products").find('input[type="checkbox"]'),i=e.toggleClass("active").hasClass("active");t.prop("checked",i),$(".checked-delete-all").toggleClass("active",i)})),$(".checked-more__open").on("click",(function(){$(".checked-more__modal").removeClass("active"),$(this).parent(".checked-more").find(".checked-more__modal").toggleClass("active")})),$(".checked-more__modal-close").on("click",(function(){$(this).parent(".checked-more__modal").removeClass("active")})),$(".menu a").on("mouseenter",(function(){clearTimeout(a),a=setTimeout((()=>{$(".menu a").removeClass("active"),$("[data-submenu]").removeClass("active"),$(this).addClass("active");let e=$(this).data("menu"),t=$(`[data-submenu="${e}"]`);if(t.addClass("active"),t.length){let e=$(".submenu"),i=t.position().top,s=e.scrollTop(),l=s+i;Math.abs(s-l)>5&&e.stop(!0).animate({scrollTop:l},500)}}),100)})),$(".submenu-item").first().addClass("active"),$(".menu a").first().addClass("active");var c=$(".header-wrapper").outerHeight();let r=$(window).height()-c;$(".header-catalog__menu").css("max-height",r-150),$(".menu").css("max-height",r-150),$(".submenu").css("max-height",r-150)}));